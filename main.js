(()=>{"use strict";var e,t,r,n,o={7137:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManager=void 0;var r=function(){function e(){this.sounds=new Map}return e.prototype.add=function(e,t){this.sounds.set(e,t)},e.prototype.play=function(e){var t=this.sounds.get(e);t&&new Audio(t).play()},e}();t.AudioManager=r},6809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldManager=t.UIManager=t.TextureAtlas=t.TextManager=t.SystemBase=t.StateBase=t.VertexShader=t.ShaderProgram=t.FragmentShader=t.UniformVariation=t.UniformType=t.ShaderVariableResolver=t.Renderer=t.Vec4=t.Vec3=t.Vec2=t.Random=t.Mat4=t.Mat3=t.Color=t.Angle=t.Keys=t.InputManager=t.GLShape=t.Geometry=t.Entity=t.EntityManager=t.GameBase=t.AuraError=t.Texture=t.Shader=t.MultiColor=t.Model=t.FlatColor=t.Component=t.CameraBase=void 0;var n=r(6679);Object.defineProperty(t,"CameraBase",{enumerable:!0,get:function(){return n.CameraBase}});var o=r(3631);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return o.Component}});var i=r(983);Object.defineProperty(t,"FlatColor",{enumerable:!0,get:function(){return i.FlatColor}});var a=r(9468);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return a.Model}});var s=r(6752);Object.defineProperty(t,"MultiColor",{enumerable:!0,get:function(){return s.MultiColor}});var u=r(604);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return u.Shader}});var c=r(3111);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return c.Texture}});var l=r(2189);Object.defineProperty(t,"AuraError",{enumerable:!0,get:function(){return l.AuraError}});var f=r(504);Object.defineProperty(t,"GameBase",{enumerable:!0,get:function(){return f.GameBase}});var d=r(1241);Object.defineProperty(t,"EntityManager",{enumerable:!0,get:function(){return d.EntityManager}});var p=r(2182);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return p.Entity}});var y=r(520);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return y.Geometry}});var h=r(9919);Object.defineProperty(t,"GLShape",{enumerable:!0,get:function(){return h.GLShape}});var v=r(6163);Object.defineProperty(t,"InputManager",{enumerable:!0,get:function(){return v.InputManager}});var m=r(5179);Object.defineProperty(t,"Keys",{enumerable:!0,get:function(){return m.Keys}});var _=r(137);Object.defineProperty(t,"Angle",{enumerable:!0,get:function(){return _.Angle}});var g=r(9076);Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return g.Color}});var b=r(6024);Object.defineProperty(t,"Mat3",{enumerable:!0,get:function(){return b.Mat3}});var w=r(9562);Object.defineProperty(t,"Mat4",{enumerable:!0,get:function(){return w.Mat4}});var E=r(9170);Object.defineProperty(t,"Random",{enumerable:!0,get:function(){return E.Random}});var O=r(6042);Object.defineProperty(t,"Vec2",{enumerable:!0,get:function(){return O.Vec2}});var T=r(1502);Object.defineProperty(t,"Vec3",{enumerable:!0,get:function(){return T.Vec3}});var x=r(2467);Object.defineProperty(t,"Vec4",{enumerable:!0,get:function(){return x.Vec4}});var P=r(1125);Object.defineProperty(t,"Renderer",{enumerable:!0,get:function(){return P.Renderer}});var A=r(8922);Object.defineProperty(t,"ShaderVariableResolver",{enumerable:!0,get:function(){return A.ShaderVariableResolver}});var S=r(2371);Object.defineProperty(t,"UniformType",{enumerable:!0,get:function(){return S.UniformType}});var R=r(3013);Object.defineProperty(t,"UniformVariation",{enumerable:!0,get:function(){return R.UniformVariation}});var M=r(8423);Object.defineProperty(t,"FragmentShader",{enumerable:!0,get:function(){return M.FragmentShader}});var C=r(7691);Object.defineProperty(t,"ShaderProgram",{enumerable:!0,get:function(){return C.ShaderProgram}});var j=r(8235);Object.defineProperty(t,"VertexShader",{enumerable:!0,get:function(){return j.VertexShader}});var I=r(8092);Object.defineProperty(t,"StateBase",{enumerable:!0,get:function(){return I.StateBase}});var N=r(5761);Object.defineProperty(t,"SystemBase",{enumerable:!0,get:function(){return N.SystemBase}});var F=r(8442);Object.defineProperty(t,"TextManager",{enumerable:!0,get:function(){return F.TextManager}});var G=r(1422);Object.defineProperty(t,"TextureAtlas",{enumerable:!0,get:function(){return G.TextureAtlas}});var L=r(7523);Object.defineProperty(t,"UIManager",{enumerable:!0,get:function(){return L.UIManager}});var U=r(4842);Object.defineProperty(t,"WorldManager",{enumerable:!0,get:function(){return U.WorldManager}})},845:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4499:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;var i=r(6994),a=r(2189),s=r(6024),u=r(6042),c=function(e){function t(t){var r,n,o=e.call(this,t)||this;return o.projection=s.Mat3.projection(t.projection.width,t.projection.height),o.transform=new i.Transform(null===(r=null==t?void 0:t.offset)||void 0===r?void 0:r.position,new u.Vec2(1,1),null===(n=null==t?void 0:t.offset)||void 0===n?void 0:n.angle),o}return o(t,e),t.prototype.attachTo=function(e,t){var r,n,o,i,s;try{this.following={transform:e.getComponent("Transform"),rules:{position:{x:null===(n=null===(r=null==t?void 0:t.position)||void 0===r?void 0:r.x)||void 0===n||n,y:null===(i=null===(o=null==t?void 0:t.position)||void 0===o?void 0:o.y)||void 0===i||i},angle:null!==(s=null==t?void 0:t.angle)&&void 0!==s&&s}}}catch(t){throw new a.AuraError({class:"Camera",method:"attachTo",message:"Failed to attach to Entity with tag ".concat(e.tag," : the Entity lacks a Transform2D")})}},t.prototype.getViewMatrix=function(){var e,t;return this.following?(t=s.Mat3.translate(new s.Mat3,this.actualPosition()),t=s.Mat3.rotate(t,this.actualAngle()),t=s.Mat3.scale(t,this.transform.scale)):t=this.transform.compute(),null!==(e=s.Mat3.invert(t))&&void 0!==e?e:t},t.prototype.moveRight=function(e){this.transform.moveRight(e)},t.prototype.moveUp=function(e){this.transform.moveUp(e)},t.prototype.move=function(e){e.x&&this.moveRight(e.x),e.y&&this.moveUp(e.y)},t.prototype.translate=function(e){this.transform.translate(e)},t.prototype.rotate=function(e){this.transform.rotate(e)},t.prototype.zoom=function(e){this.transform.scaleBy(e)},t.prototype.zoomTo=function(e){this.transform.scaleTo(e)},t.prototype.actualPosition=function(){var e=this.transform.position;if(this.following){var t=this.following,r=t.transform,n=t.rules,o=new u.Vec2(n.position.x?r.position.x:0,n.position.y?r.position.y:0);e=u.Vec2.add(e,o)}return e},t.prototype.actualAngle=function(){var e=this.transform.angle;return this.following&&(e+=this.following.transform.angle*(this.following.rules.angle?1:0)),e},t}(r(6679).CameraBase);t.Camera=c},6679:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraBase=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),e.prototype.detach=function(){this.following=void 0},e.prototype.reset=function(){this.transform.reset()},e}();t.CameraBase=r},6810:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxCollider=void 0;var i=function(e){function t(t){var r=e.call(this,"BoxCollider")||this;return r.dimensions=t,r}return o(t,e),t}(r(3631).Component);t.BoxCollider=i},6994:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=void 0;var i=r(6024),a=r(6042),s=function(e){function t(t,r,n,o){void 0===t&&(t=new a.Vec2),void 0===r&&(r=new a.Vec2(1,1)),void 0===n&&(n=0),void 0===o&&(o=new a.Vec2);var i=e.call(this,"Transform")||this;return i.initialPosition=t,i.initialScale=r,i.initialAngle=n,i.velocity=o,i.position=new a.Vec2,i.up=new a.Vec2(0,1),i.right=new a.Vec2(1,0),i.scale=new a.Vec2(1,1),i.angle=0,i.translate(t),i.scaleTo(r),i.rotate(n),i}return o(t,e),t.prototype.moveRight=function(e){this.mutable.position=a.Vec2.add(this.position,a.Vec2.scale(this.right,e))},t.prototype.moveUp=function(e){this.mutable.position=a.Vec2.add(this.position,a.Vec2.scale(this.up,e))},t.prototype.move=function(e){e.x&&this.moveRight(e.x),e.y&&this.moveUp(e.y)},t.prototype.translate=function(e){this.mutable.position=a.Vec2.add(this.position,e)},t.prototype.rotate=function(e){this.mutable.angle+=e;var t=i.Mat3.fromRotation(e);this.mutable.up=a.Vec2.normalize(a.Vec2.transformByMat3(this.up,t)),this.mutable.right=a.Vec2.normalize(a.Vec2.transformByMat3(this.right,t))},t.prototype.scaleBy=function(e){this.mutable.scale=a.Vec2.mult(this.scale,e)},t.prototype.scaleTo=function(e){this.mutable.scale=e},t.prototype.reset=function(){this.mutable.right=new a.Vec2(1,0),this.mutable.up=new a.Vec2(0,1),this.mutable.angle=0,this.mutable.position=new a.Vec2,this.mutable.scale=new a.Vec2(1,1),this.translate(this.initialPosition),this.scaleTo(this.initialScale),this.rotate(this.initialAngle)},t.prototype.compute=function(){var e=i.Mat3.translate(new i.Mat3,this.position);return e=i.Mat3.rotate(e,this.angle),i.Mat3.scale(e,this.scale)},Object.defineProperty(t.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),t}(r(3631).Component);t.Transform=s},3631:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;t.Component=function(e){this.name=e}},983:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.FlatColor=void 0;var i=r(9076),a=function(e){function t(t){void 0===t&&(t=i.Color.white());var r=e.call(this,"FlatColor")||this;return r.color=t,r}return o(t,e),t}(r(3631).Component);t.FlatColor=a},9468:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var i=function(e){function t(t){var r=e.call(this,"Model")||this;return r.geometry=t,r}return o(t,e),Object.defineProperty(t.prototype,"modelName",{get:function(){return this.geometry.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.vertices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertexSize",{get:function(){return this.geometry.vertexSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.geometry.vertexCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"glShape",{get:function(){return this.geometry.glShape},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureCoordinates",{get:function(){return this.geometry.textureCoordinates},enumerable:!1,configurable:!0}),t}(r(3631).Component);t.Model=i},6752:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.MultiColor=void 0;var i=function(e){function t(t){var r=e.call(this,"MultiColor")||this;return r.colors=t,r.currentColor=0,r}return o(t,e),t.prototype.nextColor=function(){var e=this.colors[this.currentColor++];return this.currentColor===this.colors.length&&(this.currentColor=0),e},t}(r(3631).Component);t.MultiColor=i},604:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Shader=void 0;var i=function(e){function t(t){var r=e.call(this,"Shader")||this;return r.program=t,r}return o(t,e),Object.defineProperty(t.prototype,"programName",{get:function(){return this.program.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertex",{get:function(){return this.program.vertex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fragment",{get:function(){return this.program.fragment},enumerable:!1,configurable:!0}),t}(r(3631).Component);t.Shader=i},3111:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Texture=void 0;var i=function(e){function t(t,r,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=e.call(this,"Texture")||this;return i.column=t,i.row=r,i.columnSpan=n,i.rowSpan=o,i}return o(t,e),t}(r(3631).Component);t.Texture=i},6476:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var u=r(7454),c=r(6042),l=r(2280),f=r(7057),d=r(504),p=r(166),y=r(6758),h=r(377),v=r(2818),m=r(2189),_=function(e){function t(t){var r,n,o,s,d,m,_,g,b,w,E,O,T,x,P,A=e.call(this,null!=t?t:{},[p.PROGRAM_BASIC,y.PROGRAM_COLOR_PER_VERTEX,h.PROGRAM_TEXTURE,v.PROGRAM_TEXTURE_COLORED])||this;return A.states=new Map,A.systems=new Map,A.text=new u.Text({renderer:A.renderer,charset:null!==(n=null===(r=null==t?void 0:t.text)||void 0===r?void 0:r.charset)&&void 0!==n?n:A.defaults.textCharset,textureAtlas:null!==(s=null===(o=null==t?void 0:t.text)||void 0===o?void 0:o.textureAtlas)&&void 0!==s?s:A.defaults.textAtlas}),A.ui=new l.UI({renderer:A.renderer,textureAtlas:null===(d=null==t?void 0:t.ui)||void 0===d?void 0:d.textureAtlas}),A.world=new f.World({renderer:A.renderer,dimensions:null!==(_=null===(m=null==t?void 0:t.world)||void 0===m?void 0:m.dimensions)&&void 0!==_?_:new c.Vec2(null===(g=A.canvas)||void 0===g?void 0:g.width,null===(b=A.canvas)||void 0===b?void 0:b.height),textureAtlas:null===(w=null==t?void 0:t.world)||void 0===w?void 0:w.textureAtlas,camera:{offset:null===(O=null===(E=null==t?void 0:t.world)||void 0===E?void 0:E.camera)||void 0===O?void 0:O.offset,projection:null!==(P=null===(x=null===(T=null==t?void 0:t.world)||void 0===T?void 0:T.camera)||void 0===x?void 0:x.projection)&&void 0!==P?P:{width:A.canvas.width,height:A.canvas.height}}}),(null==t?void 0:t.states)&&A.addStates.apply(A,a([],i(t.states),!1)),A.renderer.setRenderingMode("2D"),A}return o(t,e),t.prototype.addState=function(e){this.states.set(e.name,e)},t.prototype.addStates=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=s(r),i=o.next();!i.done;i=o.next()){var a=i.value;this.addState(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.addSystem=function(e){var t=new e;if(this.systems.get(t.name))throw new m.AuraError({class:"Game",method:"addSystem",message:"Failed to add system with name '".concat(t.name,"' : system already exists")});this.systems.set(t.name,t)},t.prototype.addSystems=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=s(r),i=o.next();!i.done;i=o.next()){var a=i.value;this.addSystem(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.getSystem=function(e){if(!this.hasSystem(e))throw new m.AuraError({class:"Game",method:"getSystem",message:"Failed to retrieve system with name '".concat(e,"'")});return this.systems.get(e)},t.prototype.initState=function(){var e;null===(e=this.currentState)||void 0===e||e.init(this)},t.prototype.endState=function(){var e;null===(e=this.currentState)||void 0===e||e.end(this)},t.prototype.update=function(){var e,t=this;this.systems.forEach((function(e){e.tick(t,t.frameDelta)})),null===(e=this.currentState)||void 0===e||e.tick(this,this.frameDelta)},t}(d.GameBase);t.Game=_},2189:function(e,t){var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AuraError=void 0;var o=function(e){function t(t){var r=e.call(this,"".concat(t.method,"() -> ").concat(t.message))||this;return r.name="".concat(t.class," Error"),r}return n(t,e),t}(Error);t.AuraError=o},504:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.GameBase=void 0;var a=r(6163),s=r(9076),u=r(6042),c=r(1125),l=r(1422),f=r(2189),d=r(7137),p=function(){function e(e,t){var r,p,y,h,v,m,_,g,b,w,E,O=this;if(this.audio=new d.AudioManager,this.frameDelta=0,this.lastFrameTime=Date.now(),this.data=new Map,this.debugData={frameCount:0,fps:""},this.defaults={backgroundColor:s.Color.black(),canvasDimensions:new u.Vec2(window.innerWidth,window.innerHeight),canvasParent:document.body,controlScheme:"keyboard",textCharset:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","(",")","[","]","+","-","*","/","!","?","'",'"',"#","Â£","$","&","%","^",",",".",":",";","<",">","_"," ","~","~"],textAtlas:new l.TextureAtlas("text","res/font.png",2048,32,64,1)},this.stopped=!1,e.canvasId){if(this.canvas=document.getElementById(e.canvasId),!this.canvas)throw new f.AuraError({class:"Game",method:"construct",message:"Failed to retrieve Canvas with id ".concat(e.canvasId)})}else this.canvas=document.createElement("canvas"),(e.canvasParent?"string"==typeof e.canvasParent?document.getElementById(e.canvasParent):e.canvasParent:this.defaults.canvasParent).append(this.canvas);this.canvas.width=null!==(h=null===(y=e.canvasDimensions)||void 0===y?void 0:y.x)&&void 0!==h?h:this.defaults.canvasDimensions.x,this.canvas.height=null!==(m=null===(v=e.canvasDimensions)||void 0===v?void 0:v.y)&&void 0!==m?m:this.defaults.canvasDimensions.y,e.hideCursor&&(this.canvas.style.cursor="none"),this.renderer=new c.Renderer(this,null!==(_=e.backgroundColor)&&void 0!==_?_:this.defaults.backgroundColor),this.input=new a.InputManager(this.canvas,null!==(g=e.controlScheme)&&void 0!==g?g:this.defaults.controlScheme),null===(b=e.sounds)||void 0===b||b.forEach((function(e){O.audio.add(e.name,e.filePath)}));try{for(var T=i(o(o([],n(t),!1),n(null!==(E=null===(w=e.shaders)||void 0===w?void 0:w.filter((function(e){return!t.includes(e)})))&&void 0!==E?E:[]),!1)),x=T.next();!x.done;x=T.next()){var P=x.value;this.renderer.createShaderProgram(P)}}catch(e){r={error:e}}finally{try{x&&!x.done&&(p=T.return)&&p.call(T)}finally{if(r)throw r.error}}this.debugMode=e.debugMode,this.init=e.init}return e.prototype.switchToState=function(e){if(this.endState(),this.currentState=this.states.get(e),!this.currentState)throw new f.AuraError({class:"Game",method:"switchToState",message:"Failed to switch to State '".concat(e,"' : State does not exist")});this.initState()},e.prototype.removeSystem=function(e){this.systems.delete(e)},e.prototype.removeSystems=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;this.removeSystem(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.hasSystem=function(e){return this.systems.has(e)},e.prototype.hasSystems=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!this.hasSystem(s))return!1}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!0},e.prototype.setData=function(e,t){this.data.set(e,t)},e.prototype.getData=function(e){var t=this.data.get(e);if(void 0===t)throw new f.AuraError({class:"Game",method:"getData",message:"Failed to retrieve data with key '".concat(e,"'")});return t},e.prototype.deleteData=function(e){this.data.delete(e)},e.prototype.registerShader=function(e){this.renderer.createShaderProgram(e)},e.prototype.start=function(e){var t;null===(t=this.init)||void 0===t||t.call(this),this.switchToState(e),this.run()},e.prototype.destroy=function(){var e;this.stopped=!0,this.renderer.destroy(),this.input.destroy(),null===(e=this.canvas)||void 0===e||e.remove(),this.canvas=void 0},e.prototype.run=function(){if(!this.stopped){var e=Date.now();this.frameDelta=e-this.lastFrameTime,this.lastFrameTime=e,this.update(),this.world.tick(this,this.frameDelta),this.ui.tick(this,this.frameDelta),this.text.tick(this,this.frameDelta),this.renderer.clearScreen(),this.world.render(),this.ui.render(),this.text.render(),this.debugMode&&(this.debugData.frameCount++,this.debugData.frameCount%10==0&&(this.debugData.frameCount=0,this.debugData.fps=(1e3/this.frameDelta).toFixed(1))),requestAnimationFrame(this.run.bind(this))}},e}();t.GameBase=p},2182:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0;var a=r(2189),s=function(){function e(e){this.config=e,this.id=(+new Date).toString(16)+(1e7*Math.random()|0).toString(16),this.components=new Map,e.components&&this.addComponents.apply(this,o([],n(e.components),!1))}return Object.defineProperty(e.prototype,"tag",{get:function(){return this.config.tag},enumerable:!1,configurable:!0}),e.prototype.tick=function(e,t){},e.prototype.onCollisionStart=function(e,t){},e.prototype.onCollisionContinue=function(e,t){},e.prototype.onCollisionEnd=function(e,t){},e.prototype.getComponent=function(e){if(!this.hasComponent(e))throw new a.AuraError({class:"Entity",method:"getComponent",message:"Failed to retrieve Component ".concat(e," for Entity with tag ").concat(this.tag)});return this.components.get(e)},e.prototype.addComponent=function(e){this.components.set(e.name,e)},e.prototype.addComponents=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;this.addComponent(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.removeComponent=function(e){this.components.delete(e)},e.prototype.removeComponents=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;this.removeComponent(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.hasComponent=function(e){return this.components.has(e)},e.prototype.hasComponents=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!this.hasComponent(s))return!1}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!0},e}();t.Entity=s},1241:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.EntityManager=void 0;var a=r(2189),s=r(8922),u=function(){function e(e){this.config=e,this.entities=[],this.renderableEntities=new Map,this.addList=[],this.removeList=[],this.vbos=new Map,this.entityFilterCache=new Map,this.sourcedEntityFilterCache=new Map,e.textureAtlas&&e.renderer.createTexture(e.textureAtlas)}return Object.defineProperty(e.prototype,"entityCount",{get:function(){return this.entities.length},enumerable:!1,configurable:!0}),e.prototype.addEntity=function(e){this.addList.push(e)},e.prototype.addEntities=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addList=this.addList.concat(e)},e.prototype.removeEntity=function(e){this.removeList.push(e)},e.prototype.removeEntities=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeList=this.removeList.concat(e)},e.prototype.clearEntities=function(){this.removeEntities.apply(this,o([],n(this.entities),!1)),this.cleanEntities(),this.invalidateFilterCaches()},e.prototype.tick=function(e,t){var r,n,o=this.loadEntities(),a=this.cleanEntities();(o||a)&&this.invalidateFilterCaches();try{for(var s=i(this.entities),u=s.next();!u.done;u=s.next())u.value.tick(e,t)}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.render=function(){var e,t,r,o,a;try{for(var s=i(this.renderableEntities.entries()),u=s.next();!u.done;u=s.next()){var c=n(u.value,2),l=c[0],f=c[1];try{for(var d=(r=void 0,i(f)),p=d.next();!p.done;p=d.next()){var y=n(p.value,2),h=y[0],v=y[1],m=this.vbos.get("".concat(l,"_").concat(h));v.length&&m&&(this.config.renderer.render({vbo:m,shaderProgramName:l,textureAtlasName:null===(a=this.config.textureAtlas)||void 0===a?void 0:a.name,entities:v}),m.changed=!1)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},e.prototype.filterEntitiesByComponentName=function(e){return this.memoizeFilter(e,(function(t){return t.hasComponent(e)}))},e.prototype.filterEntitiesByComponentNames=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.memoizeFilter(e.toString(),(function(t){return t.hasComponents.apply(t,o([],n(e),!1))}))},e.prototype.filterEntitiesByComponentNameFromSource=function(e,t,r){return this.memoizeFilter(r,(function(e){return e.hasComponent(r)}),t,e)},e.prototype.filterEntitiesByComponentNamesFromSource=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.memoizeFilter(r.toString(),(function(e){return e.hasComponents.apply(e,o([],n(r),!1))}),t,e)},e.prototype.filterEntitiesByTag=function(e){return this.memoizeFilter(e,(function(t){return t.tag===e}))},e.prototype.filterEntitiesByTags=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.memoizeFilter(e.toString(),(function(t){return e.includes(t.tag)}))},e.prototype.loadEntities=function(){var e,t;if(this.addList.length){var r=new Set;try{for(var n=i(this.addList),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.hasComponent("Shader")&&a.hasComponent("Model")){var s=a.getComponent("Shader").programName,u=a.getComponent("Model").modelName;r.add("".concat(s,"-").concat(u));var c=this.renderableEntities.get(s);if(c){var l=c.get(u);l?l.push(a):l=[a],c.set(u,l)}else(c=new Map).set(u,[a]);this.renderableEntities.set(s,c)}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.compileVertices(r),this.entities=this.entities.concat(this.addList),this.addList=[],!0}return!1},e.prototype.cleanEntities=function(){var e,t;if(this.removeList.length){var r=new Set;try{for(var n=i(this.removeList),o=n.next();!o.done;o=n.next()){var a=o.value,s=this.entities.indexOf(a);if(!(s<0)&&(this.entities.splice(s,1),a.hasComponent("Shader")&&a.hasComponent("Model"))){var u=a.getComponent("Shader").programName,c=a.getComponent("Model").modelName,l=this.renderableEntities.get(u);if(l){var f=l.get(c);f&&(f.splice(f.indexOf(a),1),r.add("".concat(u,"-").concat(c)),f.length||l.delete(c),l.size||this.renderableEntities.delete(u))}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.compileVertices(r),this.removeList=[],!0}return!1},e.prototype.compileVertices=function(e){var t,r,n,o,u,c,l;try{for(var f=i(e),d=f.next();!d.done;d=f.next()){var p=d.value,y=p.substring(0,p.indexOf("-")),h=p.substring(p.indexOf("-")+1),v=null===(l=this.renderableEntities.get(y))||void 0===l?void 0:l.get(h),m="".concat(y,"_").concat(h),_="".concat(this.config.name,"_").concat(m);if(v&&v.length){this.vbos.get(m)||this.config.renderer.createVBO(_);var g=v[0].getComponent("Shader"),b=v[0].getComponent("Model"),w=b.glShape,E=b.vertexCount,O=Object.values(g.vertex.attributes).reduce((function(e,t){return{name:t.name,size:e.size+t.size}})).size,T=O*E,x=new Float32Array(v.length*T),P=0;try{for(var A=(n=void 0,i(v)),S=A.next();!S.done;S=A.next())for(var R=S.value,M=0,C=0,j=0;j<E;j++)try{for(var I=(u=void 0,i(g.vertex.attributes)),N=I.next();!N.done;N=I.next()){var F=N.value,G=s.ShaderVariableResolver.resolveAttribute(F.name,R);if("number"==typeof G)G=Float32Array.from([G]);else if("a_Position"===F.name)G=G.slice(M,M+F.size),M+=F.size;else if("a_TexCoord"===F.name){var L=this.config.textureAtlas;if(!L)throw new a.AuraError({class:"EntityManager",method:"compileVertices",message:"\n                                            Failed to render ".concat(this.config.name," Entity '").concat(R.tag,"' with texture shader: No Texture Atlas\n                                            was configured for ").concat(this.config.name," Entities\n                                        ")});var U=R.getComponent("Texture"),V=U.column,D=U.row,z=U.columnSpan,B=U.rowSpan;G=L.resolveTextureCoordinates(G.slice(C,C+2),V,D,z,B),C+=2}x.set(G,P),P+=F.size}}catch(e){u={error:e}}finally{try{N&&!N.done&&(c=I.return)&&c.call(I)}finally{if(u)throw u.error}}}catch(e){n={error:e}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(n)throw n.error}}this.vbos.set(m,{name:_,vertices:x,vertexCount:E,vertexSize:O,glShape:w,changed:!0})}else this.config.renderer.deleteVBO(_),this.vbos.delete(m)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}},e.prototype.memoizeFilter=function(e,t,r,n){void 0===n&&(n=this.entities);var o=this.entityFilterCache;r&&(e="".concat(e,"_").concat(r),o=this.sourcedEntityFilterCache);var i=o.get(e);return i||(i=n.filter(t),o.set(e,i)),i},e.prototype.invalidateFilterCaches=function(){this.entityFilterCache.clear(),this.sourcedEntityFilterCache.clear()},e}();t.EntityManager=u},9014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CIRCLE=void 0;var n=r(2494);t.CIRCLE=(0,n.POLYGON)(30,"circle")},6425:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.F=void 0;var n=r(520),o=r(9919);t.F=new n.Geometry({name:"f",vertices:Float32Array.from([-.5,-.5,-.25,-.5,-.25,.5,-.25,.5,-.5,.5,-.5,-.5,-.25,.25,.5,.25,.5,.5,.5,.5,-.25,.5,-.25,.25,-.25,-.15,.2,-.15,.2,.05,.2,.05,-.25,.05,-.25,-.15]),vertexSize:2,vertexCount:18,glShape:o.GLShape.TRIANGLES,textureCoordinates:Float32Array.from([])})},9872:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HEXAGON=void 0;var n=r(2494);t.HEXAGON=(0,n.POLYGON)(6,"hexagon")},5341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LINE=void 0;var n=r(520),o=r(9919);t.LINE=new n.Geometry({name:"line",vertices:Float32Array.from([-.5,0,.5,0]),vertexSize:2,vertexCount:2,glShape:o.GLShape.LINES,textureCoordinates:Float32Array.from([])})},4403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OCTAGON=void 0;var n=r(2494);t.OCTAGON=(0,n.POLYGON)(8,"octagon")},8247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PENTAGON=void 0;var n=r(520),o=r(9919);t.PENTAGON=new n.Geometry({name:"pentagon",vertices:Float32Array.from([-.3,-.5,.3,-.5,.5,.1,0,.5,-.5,.1]),vertexSize:2,vertexCount:5,glShape:o.GLShape.TRIANGLE_FAN,textureCoordinates:Float32Array.from([])})},9177:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.POINT=void 0;var n=r(520),o=r(9919);t.POINT=new n.Geometry({name:"point",vertices:Float32Array.from([0,0]),vertexSize:2,vertexCount:1,glShape:o.GLShape.POINTS,textureCoordinates:Float32Array.from([])})},2494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.POLYGON=void 0;var n=r(520),o=r(9919);t.POLYGON=function(e,t){for(var r=[],i=0;i<2*e;i+=2){var a=Math.PI*i/e;r.push(Math.cos(a)/2),r.push(Math.sin(a)/2)}return new n.Geometry({name:null!=t?t:"polygon_".concat(e),vertices:Float32Array.from(r),vertexSize:2,vertexCount:e,glShape:o.GLShape.TRIANGLE_FAN,textureCoordinates:Float32Array.from([])})}},4240:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SQUARE=void 0;var n=r(520),o=r(9919);t.SQUARE=new n.Geometry({name:"square",vertices:Float32Array.from([-.5,-.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5]),vertexSize:2,vertexCount:6,glShape:o.GLShape.TRIANGLES,textureCoordinates:Float32Array.from([0,0,1,0,1,1,1,1,0,1,0,0])})},1827:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRIANGLE=void 0;var n=r(520),o=r(9919),i=Math.sqrt(3)/4;t.TRIANGLE=new n.Geometry({name:"triangle_equilateral",vertices:Float32Array.from([-.5,-i,.5,-i,0,i]),vertexSize:2,vertexCount:3,glShape:o.GLShape.TRIANGLES,textureCoordinates:Float32Array.from([0,0,1,0,.5,1])})},2540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRIANGLE_RIGHT_ANGLE=void 0;var n=r(520),o=r(9919);t.TRIANGLE_RIGHT_ANGLE=new n.Geometry({name:"triangle_right_angle",vertices:Float32Array.from([-.5,-.5,.5,-.5,-.5,.5]),vertexSize:2,vertexCount:3,glShape:o.GLShape.TRIANGLES,textureCoordinates:Float32Array.from([0,0,1,0,0,1])})},5460:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CIRCLE_WIREFRAME=void 0;var n=r(6617);t.CIRCLE_WIREFRAME=(0,n.POLYGON_WIREFRAME)(30,"circle_wireframe")},4636:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.F_WIREFRAME=void 0;var n=r(520),o=r(9919);t.F_WIREFRAME=new n.Geometry({name:"f_wireframe",vertices:Float32Array.from([-.5,-.5,-.25,-.5,-.25,-.15,.2,-.15,.2,.05,-.25,.05,-.25,.25,.5,.25,.5,.5,-.5,.5]),vertexSize:2,vertexCount:10,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})},9815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HEXAGON_WIREFRAME=void 0;var n=r(6617);t.HEXAGON_WIREFRAME=(0,n.POLYGON_WIREFRAME)(6,"hexagon_wireframe")},7882:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OCTAGON_WIREFRAME=void 0;var n=r(6617);t.OCTAGON_WIREFRAME=(0,n.POLYGON_WIREFRAME)(8,"octagon_wireframe")},7095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PENTAGON_WIREFRAME=void 0;var n=r(520),o=r(9919);t.PENTAGON_WIREFRAME=new n.Geometry({name:"pentagon_wireframe",vertices:Float32Array.from([-.3,-.5,.3,-.5,.5,.1,0,.5,-.5,.1]),vertexSize:2,vertexCount:5,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})},6617:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.POLYGON_WIREFRAME=void 0;var n=r(520),o=r(9919);t.POLYGON_WIREFRAME=function(e,t){for(var r=[],i=0;i<2*e;i+=2){var a=Math.PI*i/e;r.push(Math.cos(a)/2),r.push(Math.sin(a)/2)}return new n.Geometry({name:null!=t?t:"polygon_".concat(e,"_wireframe"),vertices:Float32Array.from(r),vertexSize:2,vertexCount:e,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})}},6687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SQUARE_WIREFRAME=void 0;var n=r(520),o=r(9919);t.SQUARE_WIREFRAME=new n.Geometry({name:"square_wireframe",vertices:Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5]),vertexSize:2,vertexCount:4,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})},5459:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRIANGLE_WIREFRAME=void 0;var n=r(520),o=r(9919),i=Math.sqrt(3)/4;t.TRIANGLE_WIREFRAME=new n.Geometry({name:"triangle_equilateral_wireframe",vertices:Float32Array.from([-.5,-i,.5,-i,0,i]),vertexSize:2,vertexCount:3,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})},8521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRIANGLE_RIGHT_ANGLE_WIREFRAME=void 0;var n=r(520),o=r(9919);t.TRIANGLE_RIGHT_ANGLE_WIREFRAME=new n.Geometry({name:"triangle_right_angle_wireframe",vertices:Float32Array.from([-.5,-.5,.5,-.5,-.5,.5]),vertexSize:2,vertexCount:3,glShape:o.GLShape.LINE_LOOP,textureCoordinates:Float32Array.from([])})},520:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Geometry=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.config.vertices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexSize",{get:function(){return this.config.vertexSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexCount",{get:function(){return this.config.vertexCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"glShape",{get:function(){return this.config.glShape},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textureCoordinates",{get:function(){return this.config.textureCoordinates},enumerable:!1,configurable:!0}),e}();t.Geometry=r},9919:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GLShape=void 0,(r=t.GLShape||(t.GLShape={}))[r.POINTS=WebGLRenderingContext.POINTS]="POINTS",r[r.LINES=WebGLRenderingContext.LINES]="LINES",r[r.LINE_LOOP=WebGLRenderingContext.LINE_LOOP]="LINE_LOOP",r[r.LINE_STRIP=WebGLRenderingContext.LINE_STRIP]="LINE_STRIP",r[r.TRIANGLES=WebGLRenderingContext.TRIANGLES]="TRIANGLES",r[r.TRIANGLE_STRIP=WebGLRenderingContext.TRIANGLE_STRIP]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=WebGLRenderingContext.TRIANGLE_FAN]="TRIANGLE_FAN"},9323:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.VertexShaders=t.ShaderPrograms=t.FragmentShaders=t.Geometries=t.World=t.UI=t.Panel=t.System=t.Physics=t.Collision=t.State=t.Game=t.Transform=t.BoxCollider=t.Camera=void 0;var i=r(4499);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return i.Camera}});var a=r(6810);Object.defineProperty(t,"BoxCollider",{enumerable:!0,get:function(){return a.BoxCollider}});var s=r(6994);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return s.Transform}});var u=r(6476);Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return u.Game}});var c=r(9014),l=r(6425),f=r(9872),d=r(5341),p=r(4403),y=r(8247),h=r(9177),v=r(2494),m=r(4240),_=r(1827),g=r(2540),b=r(5460),w=r(4636),E=r(9815),O=r(7882),T=r(7095),x=r(6617),P=r(6687),A=r(5459),S=r(8521),R=r(6628),M=r(2476),C=r(6190),j=r(4113),I=r(166),N=r(6758),F=r(377),G=r(2818),L=r(3673),U=r(178),V=r(1644),D=r(7389);Object.defineProperty(t,"State",{enumerable:!0,get:function(){return D.State}});var z=r(4676);Object.defineProperty(t,"Collision",{enumerable:!0,get:function(){return z.Collision}});var B=r(6864);Object.defineProperty(t,"Physics",{enumerable:!0,get:function(){return B.Physics}});var X=r(7669);Object.defineProperty(t,"System",{enumerable:!0,get:function(){return X.System}});var W=r(2038);Object.defineProperty(t,"Panel",{enumerable:!0,get:function(){return W.Panel}});var k=r(2280);Object.defineProperty(t,"UI",{enumerable:!0,get:function(){return k.UI}});var K=r(7057);Object.defineProperty(t,"World",{enumerable:!0,get:function(){return K.World}}),o(r(6809),t),o(r(845),t),t.Geometries={CIRCLE:c.CIRCLE,F:l.F,HEXAGON:f.HEXAGON,LINE:d.LINE,OCTAGON:p.OCTAGON,PENTAGON:y.PENTAGON,POINT:h.POINT,POLYGON:v.POLYGON,SQUARE:m.SQUARE,TRIANGLE:_.TRIANGLE,TRIANGLE_RIGHT_ANGLE:g.TRIANGLE_RIGHT_ANGLE,Wireframe:{CIRCLE:b.CIRCLE_WIREFRAME,F:w.F_WIREFRAME,HEXAGON:E.HEXAGON_WIREFRAME,OCTAGON:O.OCTAGON_WIREFRAME,PENTAGON:T.PENTAGON_WIREFRAME,POLYGON:x.POLYGON_WIREFRAME,SQUARE:P.SQUARE_WIREFRAME,TRIANGLE:A.TRIANGLE_WIREFRAME,TRIANGLE_RIGHT_ANGLE:S.TRIANGLE_RIGHT_ANGLE_WIREFRAME}},t.FragmentShaders={BASIC:R.FRAGMENT_BASIC,COLOR_PER_VERTEX:M.FRAGMENT_COLOR_PER_VERTEX,TEXTURE:C.FRAGMENT_TEXTURE,TEXTURE_COLORED:j.FRAGMENT_TEXTURE_COLORED},t.ShaderPrograms={BASIC:I.PROGRAM_BASIC,COLOR_PER_VERTEX:N.PROGRAM_COLOR_PER_VERTEX,TEXTURE:F.PROGRAM_TEXTURE,TEXTURE_COLORED:G.PROGRAM_TEXTURE_COLORED},t.VertexShaders={BASIC:L.VERTEX_BASIC,COLOR_PER_VERTEX:U.VERTEX_COLOR_PER_VERTEX,TEXTURE:V.VERTEX_TEXTURE}},6163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputManager=void 0;var n=r(6042),o=r(5179),i=function(){function e(e,t){switch(this.controlScheme=t,this.mousePos=new n.Vec2,this.clickPos=new n.Vec2,this.dblClickPos=new n.Vec2,this.contextClickPos=new n.Vec2,this.keyBuffer=new Set,this.mousePressed=!1,this.ignoreKeys=[o.Keys.F_5,o.Keys.F_12],this.boundHandlers={onKeyDown:this.onKeyDown.bind(this),onKeyUp:this.onKeyUp.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),onClick:this.onClick.bind(this),onContextMenu:this.onContextMenu.bind(this),onDoubleClick:this.onDoubleClick.bind(this),onMouseMove:this.onMouseMove.bind(this)},this.canvas=e,t){case"keyboard":this.setupKeyboard();break;case"mouse":this.setupMouse(e);break;default:this.setupMouse(e),this.setupKeyboard()}}return e.prototype.isKeyDown=function(e){return this.keyBuffer.has(e)},e.prototype.isMouseDown=function(){return this.mousePressed},e.prototype.destroy=function(){switch(this.controlScheme){case"keyboard":this.tearDownKeyboard();break;case"mouse":this.tearDownMouse(this.canvas);break;default:this.tearDownMouse(this.canvas),this.tearDownKeyboard()}this.canvas=void 0},e.prototype.onKeyDown=function(e){var t=e.code;e.preventDefault(),this.ignoreKeys.includes(t)||this.keyBuffer.add(t)},e.prototype.onKeyUp=function(e){var t=e.code;e.preventDefault(),this.ignoreKeys.includes(t)||this.keyBuffer.delete(t)},e.prototype.onMouseDown=function(){this.mousePressed=!0},e.prototype.onMouseUp=function(){this.mousePressed=!1},e.prototype.onClick=function(e){this.clickPos.set(e.x,e.y)},e.prototype.onContextMenu=function(e){this.contextClickPos.set(e.x,e.y)},e.prototype.onDoubleClick=function(e){this.dblClickPos.set(e.x,e.y)},e.prototype.onMouseMove=function(e){this.mousePos.set(e.x,e.y)},e.prototype.setupKeyboard=function(){window.addEventListener("keydown",this.boundHandlers.onKeyDown),window.addEventListener("keyup",this.boundHandlers.onKeyUp)},e.prototype.tearDownKeyboard=function(){window.removeEventListener("keydown",this.boundHandlers.onKeyDown),window.removeEventListener("keyup",this.boundHandlers.onKeyUp)},e.prototype.setupMouse=function(e){e.addEventListener("mousedown",this.boundHandlers.onMouseDown),e.addEventListener("mouseup",this.boundHandlers.onMouseUp),e.addEventListener("click",this.boundHandlers.onClick),e.addEventListener("contextmenu",this.boundHandlers.onContextMenu),e.addEventListener("dblclick",this.boundHandlers.onDoubleClick),e.addEventListener("mousemove",this.boundHandlers.onMouseMove)},e.prototype.tearDownMouse=function(e){e.removeEventListener("mousedown",this.boundHandlers.onMouseDown),e.removeEventListener("mouseup",this.boundHandlers.onMouseUp),e.removeEventListener("click",this.boundHandlers.onClick),e.removeEventListener("contextmenu",this.boundHandlers.onContextMenu),e.removeEventListener("dblclick",this.boundHandlers.onDoubleClick),e.removeEventListener("mousemove",this.boundHandlers.onMouseMove)},e}();t.InputManager=i},5179:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Keys=void 0,(r=t.Keys||(t.Keys={})).A="KeyA",r.B="KeyB",r.C="KeyC",r.D="KeyD",r.E="KeyE",r.F="KeyF",r.G="KeyG",r.H="KeyH",r.I="KeyI",r.J="KeyJ",r.K="KeyK",r.L="KeyL",r.M="KeyM",r.N="KeyN",r.O="KeyO",r.P="KeyP",r.Q="KeyQ",r.R="KeyR",r.S="KeyS",r.T="KeyT",r.U="KeyU",r.V="KeyV",r.W="KeyW",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r.NUM_1="Digit1",r.NUM_2="Digit2",r.NUM_3="Digit3",r.NUM_4="Digit4",r.NUM_5="Digit5",r.NUM_6="Digit6",r.NUM_7="Digit7",r.NUM_8="Digit8",r.NUM_9="Digit9",r.NUM_0="Digit0",r.NUM_PAD_1="Numpad1",r.NUM_PAD_2="Numpad2",r.NUM_PAD_3="Numpad3",r.NUM_PAD_4="Numpad4",r.NUM_PAD_5="Numpad5",r.NUM_PAD_6="Numpad6",r.NUM_PAD_7="Numpad7",r.NUM_PAD_8="Numpad8",r.NUM_PAD_9="Numpad9",r.NUM_PAD_0="Numpad0",r.ARROW_LEFT="ArrowLeft",r.ARROW_RIGHT="ArrowRight",r.ARROW_UP="ArrowUp",r.ARROW_DOWN="ArrowDown",r.F_1="F1",r.F_2="F2",r.F_3="F3",r.F_4="F4",r.F_5="F5",r.F_6="F6",r.F_7="F7",r.F_8="F8",r.F_9="F9",r.F_10="F10",r.F_11="F11",r.F_12="F12",r.SPACE="Space",r.ENTER="Enter",r.SHIFT_LEFT="ShiftLeft",r.SHIFT_RIGHT="ShiftRight",r.CTRL_LEFT="ControlLeft",r.CTRL_RIGHT="ControlRight",r.ESC="Escape"},137:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Angle=void 0;var r=function(){function e(){}return e.toRadians=function(e){return e*(Math.PI/180)},e.toDegrees=function(e){return 180*e/Math.PI},e}();t.Angle=r},9076:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;var n=r(9170),o=function(){function e(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n,this.r=Math.max(Math.min(e,255),0),this.g=Math.max(Math.min(t,255),0),this.b=Math.max(Math.min(r,255),0),this.a=Math.max(Math.min(n,1),0)}return e.white=function(t){return new e(255,255,255,t)},e.black=function(t){return new e(0,0,0,t)},e.grey=function(t){return new e(128,128,128,t)},e.red=function(t){return new e(255,0,0,t)},e.green=function(t){return new e(0,255,0,t)},e.blue=function(t){return new e(0,0,255,t)},e.yellow=function(t){return new e(255,255,0,t)},e.magenta=function(t){return new e(255,0,255,t)},e.cyan=function(t){return new e(0,255,255,t)},e.random=function(t,r){return void 0===t&&(t=!1),void 0===r&&(r=1),new e(n.Random.between(0,255),n.Random.between(0,255),n.Random.between(0,255),t?n.Random.between(0,1):r)},e.randomList=function(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=1);for(var o=[],i=0;i<t;i++)o.push(e.random(r,n));return o},e.rgba=function(t,r,n,o){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new e(t,r,n,o)},e.hex=function(t){var r=0,n=0,o=0;if(t.startsWith("#"))switch(t.length){case 4:r=parseInt(t.substr(1,1).repeat(2),16),n=parseInt(t.substr(2,1).repeat(2),16),o=parseInt(t.substr(3,1).repeat(2),16);break;case 7:r=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),o=parseInt(t.substr(5,2),16)}else switch(t.length){case 3:r=parseInt(t.substr(0,1).repeat(2),16),n=parseInt(t.substr(1,1).repeat(2),16),o=parseInt(t.substr(2,1).repeat(2),16);break;case 6:r=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16)}return(isNaN(r)||isNaN(n)||isNaN(o))&&(r=n=o=0),new e(r,n,o)},e.toHex=function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t},Object.defineProperty(e.prototype,"hex",{get:function(){return"#".concat(e.toHex(this.r)).concat(e.toHex(this.g)).concat(e.toHex(this.b))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from([this.rf,this.gf,this.bf,this.a])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rf",{get:function(){return this.r/255},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gf",{get:function(){return this.g/255},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bf",{get:function(){return this.b/255},enumerable:!1,configurable:!0}),e}();t.Color=o},6024:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mat3=void 0;var r=function(){function e(t){void 0===t&&(t=e.IDENTITY.slice(0)),this.array=t}return e.add=function(t,r){var n=t.array,o=r.array;return new e([n[0]+o[0],n[1]+o[1],n[2]+o[2],n[3]+o[3],n[4]+o[4],n[5]+o[5],n[6]+o[6],n[7]+o[7],n[8]+o[8]])},e.sub=function(t,r){var n=t.array,o=r.array;return new e([n[0]-o[0],n[1]-o[1],n[2]-o[2],n[3]-o[3],n[4]-o[4],n[5]-o[5],n[6]-o[6],n[7]-o[7],n[8]-o[8]])},e.mult=function(t,r){var n=t.array,o=r.array,i=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],d=n[7],p=n[8],y=o[0],h=o[1],v=o[2],m=o[3],_=o[4],g=o[5],b=o[6],w=o[7],E=o[8];return new e([i*y+a*m+s*b,i*h+a*_+s*w,i*v+a*g+s*E,u*y+c*m+l*b,u*h+c*_+l*w,u*v+c*g+l*E,f*y+d*m+p*b,f*h+d*_+p*w,f*v+d*g+p*E])},e.multScalar=function(t,r){var n=t.array;return new e([n[0]*r,n[1]*r,n[2]*r,n[3]*r,n[4]*r,n[5]*r,n[6]*r,n[7]*r,n[8]*r])},e.invert=function(t){var r=t.determinant;return r?e.multScalar(e.adjoint(t),1/r):null},e.transpose=function(t){var r=t.array,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5];return new e([n,a,r[6],o,s,r[7],i,u,r[8]])},e.adjoint=function(t){var r=t.array,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],c=r[6],l=r[7],f=r[8];return new e([s*f-u*l,-(o*f-i*l),o*u-i*s,-(a*f-u*c),n*f-i*c,-(n*u-i*a),a*l-s*c,-(n*l-o*c),n*s-o*a])},e.translate=function(t,r){var n=t.array,o=r.x,i=r.y,a=n[0],s=n[1],u=n[2],c=n[3],l=n[4],f=n[5];return new e([a,s,u,c,l,f,o*a+i*c+n[6],o*s+i*l+n[7],o*u+i*f+n[8]])},e.rotate=function(t,r){var n=t.array,o=Math.sin(r),i=Math.cos(r),a=n[0],s=n[1],u=n[2],c=n[3],l=n[4],f=n[5];return new e([i*a-o*c,i*s-o*l,i*u-o*f,i*c+o*a,i*l+o*s,i*f+o*u,n[6],n[7],n[8]])},e.fromRotation=function(t){var r=Math.sin(t),n=Math.cos(t);return new e([n,-r,0,r,n,0,0,0,1])},e.scale=function(t,r){var n=t.array,o=r.x,i=r.y;return new e([o*n[0],o*n[1],o*n[2],i*n[3],i*n[4],i*n[5],n[6],n[7],n[8]])},e.projection=function(t,r){return new e([2/t,0,0,0,2/r,0,0,0,1])},Object.defineProperty(e.prototype,"determinant",{get:function(){var e=this.array,t=e[0],r=e[1],n=e[2],o=e[0],i=e[1],a=(e[3],e[4]),s=e[5],u=e[3],c=(e[4],e[6]),l=e[7],f=e[8];return t*a*f+r*s*e[6]+n*u*e[7]-i*u*f-o*s*l-n*a*c},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from(this.array)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){var e=this.array;return"Mat3\n".concat(e[0]," ").concat(e[1]," ").concat(e[2],"\n").concat(e[3]," ").concat(e[4]," ").concat(e[5],"\n").concat(e[6]," ").concat(e[7]," ").concat(e[8],"\n")},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.mutable.array=e.IDENTITY.slice(0)},e.prototype.clone=function(){return new e(this.array)},Object.defineProperty(e.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),e.IDENTITY=[1,0,0,0,1,0,0,0,1],e}();t.Mat3=r},9562:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mat4=void 0;var n=r(137),o=r(1502),i=function(){function e(t){void 0===t&&(t=e.IDENTITY.slice(0)),this.array=t}return e.add=function(t,r){var n=t.array,o=r.array;return new e([n[0]+o[0],n[1]+o[1],n[2]+o[2],n[3]+o[3],n[4]+o[4],n[5]+o[5],n[6]+o[6],n[7]+o[7],n[8]+o[8],n[9]+o[9],n[10]+o[10],n[11]+o[11],n[12]+o[12],n[13]+o[13],n[14]+o[14],n[15]+o[15]])},e.sub=function(t,r){var n=t.array,o=r.array;return new e([n[0]-o[0],n[1]-o[1],n[2]-o[2],n[3]-o[3],n[4]-o[4],n[5]-o[5],n[6]-o[6],n[7]-o[7],n[8]-o[8],n[9]-o[9],n[10]-o[10],n[11]-o[11],n[12]-o[12],n[13]-o[13],n[14]-o[14],n[15]-o[15]])},e.mult=function(t,r){var n=t.array,o=r.array,i=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],d=n[7],p=n[8],y=n[9],h=n[10],v=n[11],m=n[12],_=n[13],g=n[14],b=n[15],w=o[0],E=o[1],O=o[2],T=o[3],x=o[4],P=o[5],A=o[6],S=o[7],R=o[8],M=o[9],C=o[10],j=o[11],I=o[12],N=o[13],F=o[14],G=o[15];return new e([i*w+a*x+s*R+u*I,i*E+a*P+s*M+u*N,i*O+a*A+s*C+u*F,i*T+a*S+s*j+u*G,c*w+l*x+f*R+d*I,c*E+l*P+f*M+d*N,c*O+l*A+f*C+d*F,c*T+l*S+f*j+d*G,p*w+y*x+h*R+v*I,p*E+y*P+h*M+v*N,p*O+y*A+h*C+v*F,p*T+y*S+h*j+v*G,m*w+_*x+g*R+b*I,m*E+_*P+g*M+b*N,m*O+_*A+g*j+b*F,m*T+_*S+g*j+b*G])},e.multScalar=function(t,r){var n=t.array;return new e([n[0]*r,n[1]*r,n[2]*r,n[3]*r,n[4]*r,n[5]*r,n[6]*r,n[7]*r,n[8]*r,n[9]*r,n[10]*r,n[11]*r,n[12]*r,n[13]*r,n[14]*r,n[15]*r])},e.invert=function(t){var r=t.determinant;return r?e.multScalar(e.adjoint(t),1/r):null},e.transpose=function(t){var r=t.array,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],c=r[6],l=r[7],f=r[8],d=r[9],p=r[10],y=r[11];return new e([n,s,f,r[12],o,u,d,r[13],i,c,p,r[14],a,l,y,r[15]])},e.adjoint=function(t){var r=t.array,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],c=r[6],l=r[7],f=r[8],d=r[9],p=r[10],y=r[11],h=r[12],v=r[13],m=r[14],_=r[15];return new e([u*(p*_-y*m)-c*(d*_-y*v)+l*(d*m-p*v),-(o*(p*_-y*m)-i*(d*_-y*v)+a*(d*m-p*v)),o*(c*_-l*m)-i*(u*_-l*v)+a*(u*m-c*v),-(o*(c*y-l*p)-i*(u*y-l*d)+a*(u*p-c*d)),-(s*(p*_-y*m)-c*(f*_-y*h)+l*(f*m-p*h)),n*(p*_-y*m)-i*(f*_-y*h)+a*(f*m-p*h),-(n*(c*_-l*m)-i*(s*_-l*h)+a*(s*m-c*h)),n*(c*y-l*p)-i*(s*y-l*f)+a*(s*p-c*f),s*(d*_-y*v)-u*(f*_-y*h)+l*(f*v-d*h),-(n*(d*_-y*v)-o*(f*_-y*h)+a*(f*v-d*h)),n*(u*_-l*v)-o*(s*_-l*h)+a*(s*v-u*h),-(n*(u*y-l*d)-o*(s*y-l*f)+a*(s*d-u*f)),-(s*(d*m-p*v)-u*(f*m-p*h)+c*(f*v-d*h)),n*(d*m-p*v)-o*(f*m-p*h)+i*(f*v-d*h),-(n*(u*m-c*v)-o*(s*m-c*h)+i*(s*v-u*h)),n*(u*p-c*d)-o*(s*p-c*f)+i*(s*d-u*f)])},e.translate=function(t,r){var n=t.array,o=r.x,i=r.y,a=r.z,s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],d=n[5],p=n[6],y=n[7],h=n[8],v=n[9],m=n[10],_=n[11];return new e([s,u,c,l,f,d,p,y,h,v,m,_,o*s+i*f+a*h+n[12],o*u+i*d+a*v+n[13],o*c+i*p+a*m+n[14],o*l+i*y+a*_+n[15]])},e.rotateX=function(t,r){var n=t.array,o=Math.sin(r),i=Math.cos(r),a=n[0],s=n[1],u=n[2],c=n[3],l=n[4],f=n[5],d=n[6],p=n[7],y=n[8],h=n[9],v=n[10],m=n[11];return new e([a,s,u,c,i*l+o*y,i*f+o*h,i*d+o*v,i*p+o*m,i*y-o*l,i*h-o*f,i*v-o*d,i*m-o*p,n[12],n[13],n[14],n[15]])},e.rotateY=function(t,r){var n=t.array,o=Math.sin(r),i=Math.cos(r),a=n[0],s=n[1],u=n[2],c=n[3],l=n[4],f=n[5],d=n[6],p=n[7],y=n[8],h=n[9],v=n[10],m=n[11];return new e([i*a+o*y,i*s+o*h,i*u+o*v,i*c+o*m,l,f,d,p,i*y-o*a,i*h-o*s,i*v-o*u,i*m-o*c,n[12],n[13],n[14],n[15]])},e.rotateZ=function(t,r){var n=t.array,o=Math.sin(r),i=Math.cos(r),a=n[0],s=n[1],u=n[2],c=n[3],l=n[4],f=n[5],d=n[6],p=n[7];return new e([i*a-o*l,i*s-o*f,i*u-o*d,i*c-o*p,i*l+o*a,i*f+o*s,i*d+o*u,i*p+o*c,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]])},e.fromAxisRotation=function(t,r){var n=o.Vec3.normalize(t),i=n.x,a=n.y,s=n.z,u=Math.sin(r),c=Math.cos(r),l=1-c;return new e([i*i*l+c,a*i*l+s*u,s*i*l-a*u,0,i*a*l-s*u,a*a*l+c,s*a*l+i*u,0,i*s*l+a*u,a*s*l-i*u,s*s*l+c,0,0,0,0,1])},e.scale=function(t,r){var n=t.array,o=r.x,i=r.y,a=r.z;return new e([o*n[0],o*n[1],o*n[2],o*n[3],i*n[4],i*n[5],i*n[6],i*n[7],a*n[8],a*n[9],a*n[10],a*n[11],n[12],n[13],n[14],n[15]])},e.perspective=function(t,r,o,i){var a=1/Math.tan(n.Angle.toRadians(t)/2);if(i){var s=1/(o-i);return new e([a/r,0,0,0,0,a,0,0,0,0,(i+o)*s,-1,0,0,2*i*o*s,0])}return new e([a/r,0,0,0,0,a,0,0,0,0,-1,-1,0,0,-2*o,0])},e.ortho=function(t,r,n,o,i,a){return new e([2/(r-t),0,0,0,0,2/(o-n),0,0,0,0,2/(i-a),0,(t+r)/(t-r),(n+o)/(n-o),(i+a)/(i-a),1])},e.lookAt=function(t,r,n){var i=o.Vec3.normalize(o.Vec3.sub(t,r)),a=o.Vec3.normalize(o.Vec3.cross(n,i)),s=o.Vec3.normalize(o.Vec3.cross(i,a));return new e([a.x,a.y,a.z,0,s.x,s.y,s.z,0,i.x,i.y,i.z,0,t.x,t.y,t.z,1])},Object.defineProperty(e.prototype,"determinant",{get:function(){var e=this.array,t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11],p=e[12],y=e[13],h=e[14],v=e[15];return t*(a*(f*v-d*h)-s*(l*v-d*y)+u*(l*h-f*y))-r*(i*(f*v-d*h)-s*(c*v-d*p)+u*(c*h-f*p))+n*(i*(l*v-d*y)-a*(c*v-d*p)+u*(c*y-l*p))-o*(i*(l*h-f*y)-a*(c*h-f*p)+s*(c*y-l*p))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forwardVector",{get:function(){return new o.Vec3(this.array[8],this.array[9],this.array[10])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightVector",{get:function(){return new o.Vec3(this.array[0],this.array[1],this.array[2])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upVector",{get:function(){return new o.Vec3(this.array[4],this.array[5],this.array[6])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from(this.array)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){var e=this.array;return"Mat4\n".concat(e[0]," ").concat(e[1]," ").concat(e[2]," ").concat(e[3],"\n").concat(e[4]," ").concat(e[5]," ").concat(e[6]," ").concat(e[7],"\n").concat(e[8]," ").concat(e[9]," ").concat(e[10]," ").concat(e[11],"\n").concat(e[12]," ").concat(e[13]," ").concat(e[14]," ").concat(e[15])},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.mutable.array=e.IDENTITY.slice(0)},e.prototype.clone=function(){return new e(this.array)},Object.defineProperty(e.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),e.IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e}();t.Mat4=i},9170:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0;var r=function(){function e(){}return e.between=function(e,t){return Math.random()*(t-e)+e},e}();t.Random=r},6042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vec2=void 0;var n=r(1502),o=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e.mult=function(t,r){return new e(t.x*r.x,t.y*r.y)},e.div=function(t,r){return new e(t.x/r.x,t.y/r.y)},e.scale=function(t,r){return new e(t.x*r,t.y*r)},e.negate=function(t){return new e(-t.x,-t.y)},e.invert=function(t){return new e(1/t.x,1/t.y)},e.normalize=function(t){var r=t.magnitude;return r>0?new e(t.x/r,t.y/r):new e},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.cross=function(e,t){return new n.Vec3(0,0,e.x*t.y-e.y*t.x)},e.distanceBetween=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},e.angleBetween=function(t,r){var n=t.magnitude*r.magnitude,o=e.dot(t,r);return n>0?Math.acos(o/n):0},e.rotate=function(t,r){var n=Math.cos(r),o=Math.sin(r);return new e(t.x*n-t.y*o,t.x*o+t.y*n)},e.clamp=function(t,r,n){return new e(Math.min(Math.max(t.x,r.x),n.x),Math.min(Math.max(t.y,r.y),n.y))},e.transformByMat3=function(t,r){var n=t.x,o=t.y,i=r.array,a=i[0],s=i[1],u=i[3],c=i[4];return new e(a*n+u*o+i[6],s*n+c*o+i[7])},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.hypot(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"array",{get:function(){return[this.x,this.y]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from(this.array)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){return"Vec2( ".concat(this.x," , ").concat(this.y," )")},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.mutable.x=e,this.mutable.y=t},e.prototype.setX=function(e){void 0===e&&(e=0),this.mutable.x=e},e.prototype.setY=function(e){void 0===e&&(e=0),this.mutable.y=e},e.prototype.clone=function(){return new e(this.x,this.y)},Object.defineProperty(e.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),e}();t.Vec2=o},1502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vec3=void 0;var r=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.z=r}return e.add=function(t,r){return new e(t.x+r.x,t.y+r.y,t.z+r.z)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y,t.z-r.z)},e.mult=function(t,r){return new e(t.x*r.x,t.y*r.y,t.z*r.z)},e.div=function(t,r){return new e(t.x/r.x,t.y/r.y,t.z/r.z)},e.scale=function(t,r){return new e(t.x*r,t.y*r,t.z*r)},e.negate=function(t){return new e(-t.x,-t.y,-t.z)},e.invert=function(t){return new e(1/t.x,1/t.y,1/t.z)},e.normalize=function(t){var r=t.magnitude;return r>0?new e(t.x/r,t.y/r,t.z/r):new e},e.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},e.cross=function(t,r){return new e(t.y*r.z-t.z*r.y,t.z*r.x-t.x*r.z,t.x*r.y-t.y*r.x)},e.distanceBetween=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y,t.z-e.z)},e.angleBetween=function(t,r){var n=t.magnitude*r.magnitude,o=e.dot(t,r);return n>0?Math.acos(o/n):0},e.rotateX=function(t,r,n){var o=[t.x-r.x,t.y-r.y,t.z-r.z],i=[o[0],o[1]*Math.cos(n)-o[2]*Math.sin(n),o[1]*Math.sin(n)+o[2]*Math.cos(n)];return new e(i[0]+r.x,i[1]+r.y,i[2]+r.z)},e.rotateY=function(t,r,n){var o=[t.x-r.x,t.y-r.y,t.z-r.z],i=[o[2]*Math.sin(n)+o[0]*Math.cos(n),o[1],o[2]*Math.cos(n)-o[0]*Math.sin(n)];return new e(i[0]+r.x,i[1]+r.y,i[2]+r.z)},e.rotateZ=function(t,r,n){var o=[t.x-r.x,t.y-r.y,t.z-r.z],i=[o[0]*Math.cos(n)-o[1]*Math.sin(n),o[0]*Math.sin(n)+o[1]*Math.cos(n),o[2]];return new e(i[0]+r.x,i[1]+r.y,i[2]+r.z)},e.transformByMat4=function(t,r){var n=t.x,o=t.y,i=t.z,a=r.array,s=a[0],u=a[1],c=a[2],l=a[4],f=a[5],d=a[6],p=a[8],y=a[9],h=a[10];return new e(s*n+l*o+p*i+a[12],u*n+f*o+y*i+a[13],c*n+d*o+h*i+a[14])},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.hypot(this.x,this.y,this.z)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"array",{get:function(){return[this.x,this.y,this.z]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from(this.array)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){return"Vec3( ".concat(this.x," , ").concat(this.y," , ").concat(this.z," )")},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.mutable.x=e,this.mutable.y=t,this.mutable.z=r},e.prototype.setX=function(e){void 0===e&&(e=0),this.mutable.x=e},e.prototype.setY=function(e){void 0===e&&(e=0),this.mutable.y=e},e.prototype.setZ=function(e){void 0===e&&(e=0),this.mutable.z=e},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},Object.defineProperty(e.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),e}();t.Vec3=r},2467:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vec4=void 0;var r=function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=r,this.w=n}return e.add=function(t,r){return new e(t.x+r.x,t.y+r.y,t.z+r.z,t.w+r.w)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y,t.z-r.z,t.w-r.w)},e.mult=function(t,r){return new e(t.x*r.x,t.y*r.y,t.z*r.z,t.w*r.w)},e.div=function(t,r){return new e(t.x/r.x,t.y/r.y,t.z/r.z,t.w/r.w)},e.scale=function(t,r){return new e(t.x*r,t.y*r,t.z*r,t.w*r)},e.negate=function(t){return new e(-t.x,-t.y,-t.z,-t.w)},e.invert=function(t){return new e(1/t.x,1/t.y,1/t.z,1/t.w)},e.normalize=function(t){var r=t.magnitude;return r>0?new e(t.x/r,t.y/r,t.z/r,t.w/r):new e},e.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},e.distanceBetween=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y,t.z-e.z,t.w-e.z)},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.hypot(this.x,this.y,this.z,this.w)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"array",{get:function(){return[this.x,this.y,this.z,this.w]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float32Array",{get:function(){return Float32Array.from(this.array)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){return"Vec4( ".concat(this.x," , ").concat(this.y," , ").concat(this.z," , ").concat(this.w," )")},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.mutable.x=e,this.mutable.y=t,this.mutable.z=r,this.mutable.w=n},e.prototype.setX=function(e){void 0===e&&(e=0),this.mutable.x=e},e.prototype.setY=function(e){void 0===e&&(e=0),this.mutable.y=e},e.prototype.setZ=function(e){void 0===e&&(e=0),this.mutable.z=e},e.prototype.setW=function(e){void 0===e&&(e=0),this.mutable.w=e},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},Object.defineProperty(e.prototype,"mutable",{get:function(){return this},enumerable:!1,configurable:!0}),e}();t.Vec4=r},1125:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var i=r(2189),a=r(8922),s=r(2371),u=r(3013),c=function(){function e(e,t){var r;this.shaderPrograms=new Map,this.activeShaderProgram=null,this.vbos=new Map,this.activeVBOName=null,this.textures=new Map,this.activeTexture=null,this.mode="2D",this.game=e;var n=null===(r=e.canvas)||void 0===r?void 0:r.getContext("webgl");if(!n)throw new i.AuraError({class:"Renderer",method:"construct",message:"Failed to retrieve WebGL Canvas context"});this.gl=n,this.backgroundColor=t.float32Array,this.init()}return Object.defineProperty(e.prototype,"activeTextureUnit",{get:function(){var e,t;return null!==(t=null===(e=this.activeTexture)||void 0===e?void 0:e.uniformUnit)&&void 0!==t?t:-1},enumerable:!1,configurable:!0}),e.prototype.clearScreen=function(){var e=this.gl.COLOR_BUFFER_BIT;"3D"===this.mode&&(e|=this.gl.DEPTH_BUFFER_BIT),this.gl.clear(e)},e.prototype.createVBO=function(e){var t=this.gl.createBuffer();if(!t)throw new i.AuraError({class:"Renderer",method:"createVBO",message:"Failed to create buffer with name '".concat(e,"'")});this.vbos.set(e,t)},e.prototype.deleteVBO=function(e){var t,r,o,i,a=this.gl,s=this.vbos.get(e);if(s){a.deleteBuffer(s),this.vbos.delete(e),this.activeVBOName="";try{for(var u=n(null!==(i=null===(o=this.activeShaderProgram)||void 0===o?void 0:o.attributeLocations)&&void 0!==i?i:[]),c=u.next();!c.done;c=u.next()){var l=c.value;a.disableVertexAttribArray(l.location)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}}},e.prototype.createShaderProgram=function(e){var t=this.gl,r=e.vertex,n=e.fragment,o=this.compileShader(e.name,t.VERTEX_SHADER,r.source),a=this.compileShader(e.name,t.FRAGMENT_SHADER,n.source),s=t.createProgram();if(!s)throw new i.AuraError({class:"Renderer",method:"createShaderProgram",message:"Failed to create Shader Program with name '".concat(e.name,"'")});if(t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var u=t.getProgramInfoLog(s);throw t.deleteProgram(s),t.deleteShader(a),t.deleteShader(o),new i.AuraError({class:"Renderer",method:"createShaderProgram",message:"Failed to link Shader Program with name '".concat(e.name,"' : [").concat(null!=u?u:"","]")})}this.initializeShaderProgram(s,e)},e.prototype.createTexture=function(e){var t=this.gl,r=t.TEXTURE0+this.textures.size;t.activeTexture(r);var n=t.createTexture();if(!n)throw new i.AuraError({class:"Renderer",method:"createTexture",message:"Failed to create texture with name '".concat(e.name,"' and src '").concat(e.src,"'")});t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([255,0,255,255])),t.bindTexture(t.TEXTURE_2D,null);var o=new Image;o.src=e.src,this.imageIsSameOrigin(e.src)||(o.crossOrigin=""),o.addEventListener("load",(function(){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D)})),this.textures.set(e.name,{name:e.name,texture:n,unit:r,uniformUnit:r-t.TEXTURE0})},e.prototype.setRenderingMode=function(e){var t=this.gl;"3D"===e&&(t.enable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.enable(t.CULL_FACE)),this.mode=e},e.prototype.render=function(e){var t,r,o,i,s,u,c,l,f,d,p=this.gl;e.shaderProgramName!==(null===(c=this.activeShaderProgram)||void 0===c?void 0:c.name)&&this.useShaderProgram(e.shaderProgramName),(e.vbo.name!==this.activeVBOName||e.vbo.changed)&&this.useVBO(e.vbo),e.textureAtlasName&&e.textureAtlasName!==(null===(l=this.activeTexture)||void 0===l?void 0:l.name)&&this.useTexture(e.textureAtlasName);var y=null===(f=this.activeShaderProgram)||void 0===f?void 0:f.staticUniformLocations,h=null===(d=this.activeShaderProgram)||void 0===d?void 0:d.entityUniformLocations;if(null==y?void 0:y.length)try{for(var v=n(y),m=v.next();!m.done;m=v.next()){var _=m.value;this.loadUniform(_.location,_.type,a.ShaderVariableResolver.resolveStaticUniform(_.name,this.game))}}catch(e){t={error:e}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}if(null==h?void 0:h.length){var g=0;try{for(var b=n(e.entities),w=b.next();!w.done;w=b.next()){var E=w.value;try{for(var O=(s=void 0,n(h)),T=O.next();!T.done;T=O.next()){var x=(_=T.value).location;x&&this.loadUniform(x,_.type,a.ShaderVariableResolver.resolveEntityUniform(_.name,E))}}catch(e){s={error:e}}finally{try{T&&!T.done&&(u=O.return)&&u.call(O)}finally{if(s)throw s.error}}p.drawArrays(e.vbo.glShape,g,e.vbo.vertexCount),g+=e.vbo.vertexCount}}catch(e){o={error:e}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(o)throw o.error}}}else p.drawArrays(e.vbo.glShape,0,e.vbo.vertexCount*e.entities.length)},e.prototype.destroy=function(){this.game=void 0},e.prototype.init=function(){var e=this.gl,t=o(this.backgroundColor,4),r=t[0],n=t[1],i=t[2],a=t[3];this.gl.clearColor(r,n,i,a),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.canvas.width,e.canvas.height)},e.prototype.compileShader=function(e,t,r){var n=this.gl,o=t===WebGLRenderingContext.VERTEX_SHADER?"Vertex Shader":"Fragment Shader",a=n.createShader(t);if(!a)throw new i.AuraError({class:"Renderer",method:"compileShader",message:"Failed to create ".concat(o," with name ").concat(e)});if(n.shaderSource(a,r),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS)){var s=n.getShaderInfoLog(a);throw n.deleteShader(a),new i.AuraError({class:"Renderer",method:"compileShader",message:"Failed to compile ".concat(o," with name ").concat(e," : [").concat(null!=s?s:"","]")})}return a},e.prototype.initializeShaderProgram=function(e,t){var r,o,a,s,c,l=this.gl;l.useProgram(e);var f=[];try{for(var d=n(t.vertex.attributes),p=d.next();!p.done;p=d.next()){var y=p.value;f.push({location:l.getAttribLocation(e,y.name),size:y.size})}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var h=[],v=[],m=(null!==(c=t.vertex.uniforms)&&void 0!==c?c:[]).concat(t.fragment.uniforms);try{for(var _=n(m),g=_.next();!g.done;g=_.next()){var b=g.value,w=l.getUniformLocation(e,b.name),E=b.variation===u.UniformVariation.STATIC?h:v;if(!w)throw new i.AuraError({class:"Renderer",method:"initializeShaderProgram",message:"Failed to retrieve uniform location for uniform name '".concat(b.name,"' in shader program '").concat(t.name,"'")});E.push({name:b.name,location:w,type:b.type})}}catch(e){a={error:e}}finally{try{g&&!g.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}this.shaderPrograms.set(t.name,{name:t.name,program:e,attributeLocations:f,staticUniformLocations:h,entityUniformLocations:v}),l.useProgram(null)},e.prototype.useShaderProgram=function(e){var t=this.gl,r=this.shaderPrograms.get(e);if(!r)throw new i.AuraError({class:"Renderer",method:"useShaderProgram",message:"Failed to switch to Shader Program with name '".concat(e,"'")});t.useProgram(r.program),this.activeShaderProgram=r},e.prototype.useVBO=function(e){var t,r,o,a,s=this.gl,u=this.vbos.get(e.name);if(!u)throw new i.AuraError({class:"Renderer",method:"useVBO",message:"Failed to switch to VBO with name '".concat(e.name,"'")});s.bindBuffer(s.ARRAY_BUFFER,u),e.changed&&s.bufferData(s.ARRAY_BUFFER,e.vertices,s.DYNAMIC_DRAW);var c=0;try{for(var l=n(null!==(a=null===(o=this.activeShaderProgram)||void 0===o?void 0:o.attributeLocations)&&void 0!==a?a:[]),f=l.next();!f.done;f=l.next()){var d=f.value;s.enableVertexAttribArray(d.location),s.vertexAttribPointer(d.location,d.size,s.FLOAT,!1,4*e.vertexSize,c),c+=4*d.size}}catch(e){t={error:e}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this.activeVBOName=e.name},e.prototype.useTexture=function(e){var t=this.gl,r=this.textures.get(e);if(!r)throw new i.AuraError({class:"Renderer",method:"useTexture",message:"Failed to switch to Texture with name '".concat(e,"'")});t.activeTexture(r.unit),t.bindTexture(t.TEXTURE_2D,r.texture),this.activeTexture=r},e.prototype.loadUniform=function(e,t,r){var n=this.gl;switch(t){case s.UniformType.VEC2:n.uniform2fv(e,r);break;case s.UniformType.VEC3:n.uniform3fv(e,r);break;case s.UniformType.VEC4:n.uniform4fv(e,r);break;case s.UniformType.MAT3:n.uniformMatrix3fv(e,!1,r);break;case s.UniformType.MAT4:n.uniformMatrix4fv(e,!1,r);break;case s.UniformType.INTEGER:n.uniform1i(e,r);break;case s.UniformType.FLOAT:n.uniform1f(e,r)}},e.prototype.imageIsSameOrigin=function(e){return new URL(e,window.location.href).origin===window.location.origin},e}();t.Renderer=c},8423:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FragmentShader=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this.config.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.config.uniforms},enumerable:!1,configurable:!0}),e}();t.FragmentShader=r},6628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FRAGMENT_BASIC=void 0;var n=r(2371),o=r(3013),i=r(8423);t.FRAGMENT_BASIC=new i.FragmentShader({name:"fragment_basic",source:"\n        precision mediump float;\n\n        uniform vec4 u_Color;\n\n        void main() {\n            gl_FragColor = u_Color;\n        }\n    ",uniforms:[{name:"u_Color",type:n.UniformType.VEC4,variation:o.UniformVariation.ENTITY}]})},2476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FRAGMENT_COLOR_PER_VERTEX=void 0;var n=r(8423);t.FRAGMENT_COLOR_PER_VERTEX=new n.FragmentShader({name:"fragment_color_per_vertex",source:"\n        precision mediump float;\n\n        varying vec4 v_Color;\n\n        void main() {\n            gl_FragColor = v_Color;\n        }\n    ",uniforms:[]})},6190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FRAGMENT_TEXTURE=void 0;var n=r(2371),o=r(3013),i=r(8423);t.FRAGMENT_TEXTURE=new i.FragmentShader({name:"fragment_texture",source:"\n        precision mediump float;\n\n        uniform sampler2D u_Texture;\n\n        varying vec2 v_TexCoord;\n\n        void main() {\n            gl_FragColor = texture2D(u_Texture, v_TexCoord);\n        }\n    ",uniforms:[{name:"u_Texture",type:n.UniformType.INTEGER,variation:o.UniformVariation.STATIC}]})},4113:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FRAGMENT_TEXTURE_COLORED=void 0;var n=r(2371),o=r(3013),i=r(8423);t.FRAGMENT_TEXTURE_COLORED=new i.FragmentShader({name:"fragment_texture_colored",source:"\n        precision mediump float;\n\n        uniform sampler2D u_Texture;\n        uniform vec4 u_Color;\n\n        varying vec2 v_TexCoord;\n\n        void main() {\n            gl_FragColor = texture2D(u_Texture, v_TexCoord) * u_Color;\n        }\n    ",uniforms:[{name:"u_Texture",type:n.UniformType.INTEGER,variation:o.UniformVariation.STATIC},{name:"u_Color",type:n.UniformType.VEC4,variation:o.UniformVariation.ENTITY}]})},166:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PROGRAM_BASIC=void 0;var n=r(6628),o=r(3673),i=r(7691);t.PROGRAM_BASIC=new i.ShaderProgram({name:"program_basic",vertex:o.VERTEX_BASIC,fragment:n.FRAGMENT_BASIC})},6758:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PROGRAM_COLOR_PER_VERTEX=void 0;var n=r(2476),o=r(178),i=r(7691);t.PROGRAM_COLOR_PER_VERTEX=new i.ShaderProgram({name:"program_color_per_vertex",vertex:o.VERTEX_COLOR_PER_VERTEX,fragment:n.FRAGMENT_COLOR_PER_VERTEX})},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PROGRAM_TEXTURE=void 0;var n=r(6190),o=r(1644),i=r(7691);t.PROGRAM_TEXTURE=new i.ShaderProgram({name:"program_texture",vertex:o.VERTEX_TEXTURE,fragment:n.FRAGMENT_TEXTURE})},2818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PROGRAM_TEXTURE_COLORED=void 0;var n=r(4113),o=r(1644),i=r(7691);t.PROGRAM_TEXTURE_COLORED=new i.ShaderProgram({name:"program_texture_colored",vertex:o.VERTEX_TEXTURE,fragment:n.FRAGMENT_TEXTURE_COLORED})},7691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderProgram=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this.config.fragment},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertex",{get:function(){return this.config.vertex},enumerable:!1,configurable:!0}),e}();t.ShaderProgram=r},8922:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderVariableResolver=void 0;var n=r(2189),o=function(){function e(){}return e.resolveAttribute=function(t,r){var o=e.ENTITY_ATTRIBUTE_MAPPINGS.get(t);if(!o)throw new n.AuraError({class:"ShaderVariableResolver",method:"resolveAttribute",message:"\n                    Failed to retrieve value for attribute name '".concat(t,"' : no resolution function exists for this variable\n                ")});return o(r)},e.resolveEntityUniform=function(t,r){var o=e.ENTITY_UNIFORM_MAPPINGS.get(t);if(!o)throw new n.AuraError({class:"ShaderVariableResolver",method:"resolveEntityUniform",message:"\n                    Failed to retrieve value for uniform name '".concat(t,"' : no resolution function exists for this variable\n                ")});return o(r)},e.resolveStaticUniform=function(t,r){var o=e.STATIC_UNIFORM_MAPPINGS.get(t);if(!o)throw new n.AuraError({class:"ShaderVariableResolver",method:"resolveStaticUniform",message:"\n                    Failed to retrieve value for uniform name '".concat(t,"' : no resolution function exists for this variable\n                ")});return o(r)},e.registerAttributeResolver=function(t,r){if(e.ENTITY_ATTRIBUTE_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"registerAttributeResolver",message:"\n                    Failed to register resolution function for attribute name '".concat(t,"' : this variable is already registered.\n                    Override existing resolution functions with 'overrideAttributeResolver()'\n                ")});e.ENTITY_ATTRIBUTE_MAPPINGS.set(t,r)},e.registerEntityUniformResolver=function(t,r){if(e.ENTITY_UNIFORM_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"registerEntityUniformResolver",message:"\n                    Failed to register entity resolution function for uniform name '".concat(t,"' : this variable is already registered.\n                    Override existing resolution functions with 'overrideEntityUniformResolver()'\n                ")});e.ENTITY_UNIFORM_MAPPINGS.set(t,r)},e.registerStaticUniformResolver=function(t,r){if(e.STATIC_UNIFORM_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"registerStaticUniformResolver",message:"\n                    Failed to register static resolution function for uniform name '".concat(t,"' : this variable is already registered.\n                    Override existing resolution functions with 'overrideStaticUniformResolver()'\n                ")});e.STATIC_UNIFORM_MAPPINGS.set(t,r)},e.overrideAttributeResolver=function(t,r){if(!e.ENTITY_ATTRIBUTE_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"overrideAttributeResolver",message:"\n                    Failed to override resolution function for attribute name '".concat(t,"' : this variable is not already registered.\n                    Add new resolution functions with 'registerAttributeResolver()'\n                ")});e.ENTITY_ATTRIBUTE_MAPPINGS.set(t,r)},e.overrideEntityUniformResolver=function(t,r){if(!e.ENTITY_UNIFORM_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"overrideEntityUniformResolver",message:"\n                    Failed to override entity resolution function for uniform name '".concat(t,"' : this variable is not already\n                    registered.\n                    Add new resolution functions with 'registerEntityUniformResolver()'\n                ")});e.ENTITY_UNIFORM_MAPPINGS.set(t,r)},e.overrideStaticUniformResolver=function(t,r){if(!e.STATIC_UNIFORM_MAPPINGS.get(t))throw new n.AuraError({class:"ShaderVariableResolver",method:"overrideStaticUniformResolver",message:"\n                    Failed to override static resolution function for uniform name '".concat(t,"' : this variable is not already\n                    registered.\n                    Add new resolution functions with 'registerStaticUniformResolver()'\n                ")});e.STATIC_UNIFORM_MAPPINGS.set(t,r)},e.ENTITY_ATTRIBUTE_MAPPINGS=new Map([["a_Position",function(e){return e.getComponent("Model").vertices}],["a_Color",function(e){return e.getComponent("FlatColor").color.float32Array}],["a_VertexColor",function(e){return e.getComponent("MultiColor").nextColor().float32Array}],["a_TexCoord",function(e){return e.getComponent("Model").textureCoordinates}]]),e.ENTITY_UNIFORM_MAPPINGS=new Map([["u_Transform2D",function(e){return e.getComponent("Transform").compute().float32Array}],["u_Transform3D",function(e){return e.getComponent("Transform").compute().float32Array}],["u_Color",function(e){return e.getComponent("FlatColor").color.float32Array}]]),e.STATIC_UNIFORM_MAPPINGS=new Map([["u_Projection",function(e){return e.world.activeCamera.projection.float32Array}],["u_View",function(e){return e.world.activeCamera.getViewMatrix().float32Array}],["u_Texture",function(e){return e.renderer.activeTextureUnit}]]),e}();t.ShaderVariableResolver=o},2371:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UniformType=void 0,(r=t.UniformType||(t.UniformType={})).VEC2="vec2",r.VEC3="vec3",r.VEC4="vec4",r.MAT3="mat3",r.MAT4="mat4",r.INTEGER="integer",r.FLOAT="float"},3013:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UniformVariation=void 0,(r=t.UniformVariation||(t.UniformVariation={})).STATIC="static",r.ENTITY="entity"},3673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERTEX_BASIC=void 0;var n=r(2371),o=r(3013),i=r(8235);t.VERTEX_BASIC=new i.VertexShader({name:"vertex_basic",source:"\n        uniform mat3 u_Transform2D;\n        uniform mat3 u_Projection;\n        uniform mat3 u_View;\n\n        attribute vec2 a_Position;\n\n        void main() {\n            gl_PointSize = 1.0;\n\n            gl_Position = vec4(u_Projection * u_View * u_Transform2D * vec3(a_Position, 1.0), 1.0);\n        }\n    ",attributes:[{name:"a_Position",size:2}],uniforms:[{name:"u_Transform2D",type:n.UniformType.MAT3,variation:o.UniformVariation.ENTITY},{name:"u_Projection",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC},{name:"u_View",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC}]})},178:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERTEX_COLOR_PER_VERTEX=void 0;var n=r(2371),o=r(3013),i=r(8235);t.VERTEX_COLOR_PER_VERTEX=new i.VertexShader({name:"vertex_color_per_vertex",source:"\n        precision mediump float;\n\n        uniform mat3 u_Transform2D;\n        uniform mat3 u_Projection;\n        uniform mat3 u_View;\n\n        attribute vec2 a_Position;\n        attribute vec4 a_VertexColor;\n\n        varying vec4 v_Color;\n\n        void main() {\n            v_Color = a_VertexColor;\n\n            gl_PointSize = 1.0;\n\n            gl_Position = vec4(u_Projection * u_View * u_Transform2D * vec3(a_Position, 1.0), 1.0);\n        }\n    ",attributes:[{name:"a_Position",size:2},{name:"a_VertexColor",size:4}],uniforms:[{name:"u_Transform2D",type:n.UniformType.MAT3,variation:o.UniformVariation.ENTITY},{name:"u_Projection",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC},{name:"u_View",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC}]})},1644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERTEX_TEXTURE=void 0;var n=r(2371),o=r(3013),i=r(8235);t.VERTEX_TEXTURE=new i.VertexShader({name:"vertex_texture",source:"\n        precision mediump float;\n\n        uniform mat3 u_Transform2D;\n        uniform mat3 u_Projection;\n        uniform mat3 u_View;\n\n        attribute vec2 a_Position;\n        attribute vec2 a_TexCoord;\n\n        varying vec2 v_TexCoord;\n\n        void main() {\n            v_TexCoord = a_TexCoord;\n\n            gl_PointSize = 1.0;\n\n            gl_Position = vec4(u_Projection * u_View * u_Transform2D * vec3(a_Position, 1.0), 1.0);\n        }\n    ",attributes:[{name:"a_Position",size:2},{name:"a_TexCoord",size:2}],uniforms:[{name:"u_Transform2D",type:n.UniformType.MAT3,variation:o.UniformVariation.ENTITY},{name:"u_Projection",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC},{name:"u_View",type:n.UniformType.MAT3,variation:o.UniformVariation.STATIC}]})},8235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VertexShader=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this.config.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.config.attributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.config.uniforms},enumerable:!1,configurable:!0}),e}();t.VertexShader=r},7389:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(r(8092).StateBase);t.State=i},8092:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StateBase=void 0;var r=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.config.name},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t,r;null===(r=(t=this.config).init)||void 0===r||r.call(t,e)},e.prototype.tick=function(e,t){this.config.tick(e,t)},e.prototype.end=function(e){var t,r;null===(r=(t=this.config).end)||void 0===r||r.call(t,e)},e}();t.StateBase=r},4676:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Collision=void 0;var i=function(e){function t(){var t=e.call(this,"Collision")||this;return t.collisions=[],t}return o(t,e),t.prototype.tick=function(e){for(var t=e.world.filterEntitiesByComponentNames("Transform","BoxCollider"),r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++){var o="".concat(t[r].id,"-").concat(t[n].id);this.collides(t[r],t[n])?this.collisions.includes(o)?(t[r].onCollisionContinue(e,t[n]),t[n].onCollisionContinue(e,t[r])):(t[r].onCollisionStart(e,t[n]),t[n].onCollisionStart(e,t[r]),this.collisions.push(o)):this.collisions.includes(o)&&(t[r].onCollisionEnd(e,t[n]),t[n].onCollisionEnd(e,t[r]),this.collisions.splice(this.collisions.indexOf(o),1))}},t.prototype.collides=function(e,t){var r,n,o=e.getComponent("Transform"),i=null!==(r=e.getComponent("BoxCollider").dimensions)&&void 0!==r?r:o.scale,a=o.position.x-i.x/2,s=o.position.x+i.x/2,u=o.position.y+i.y/2,c=o.position.y-i.y/2,l=t.getComponent("Transform"),f=null!==(n=t.getComponent("BoxCollider").dimensions)&&void 0!==n?n:l.scale,d=l.position.x-f.x/2,p=l.position.x+f.x/2,y=l.position.y+f.y/2,h=l.position.y-f.y/2;return a<p&&s>d&&u>h&&c<y},t}(r(7669).System);t.Collision=i},6864:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Physics=void 0;var a=r(6042),s=function(e){function t(){return e.call(this,"Physics")||this}return o(t,e),t.prototype.tick=function(e,t){var r,n,o=e.world.filterEntitiesByComponentName("Transform");try{for(var s=i(o),u=s.next();!u.done;u=s.next()){var c=u.value.getComponent("Transform");c.move(a.Vec2.scale(c.velocity,t/1e3))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},t}(r(7669).System);t.Physics=s},7669:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(r(5761).SystemBase);t.System=i},5761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SystemBase=void 0;t.SystemBase=function(e){this.name=e}},8097:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Char=void 0;var i=r(6994),a=r(983),s=r(9468),u=r(604),c=r(3111),l=r(2182),f=r(4240),d=r(2818),p=function(e){function t(t,r,n,o){return e.call(this,{tag:"char",components:[new i.Transform(t,r),new u.Shader(d.PROGRAM_TEXTURE_COLORED),new s.Model(f.SQUARE),new c.Texture(n.x,n.y),new a.FlatColor(o)]})||this}return o(t,e),t}(l.Entity);t.Char=p},7454:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var u=r(6042),c=r(8442),l=r(8097),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.addString=function(e,t,r,n){var o,c,f=[],d=0;try{for(var p=i(e),y=p.next();!y.done;y=p.next()){var h=y.value;f.push(new l.Char(u.Vec2.add(t,new u.Vec2(d*r.x,0)),r,new u.Vec2(this.config.charset.indexOf(h.toUpperCase()),0),n)),d++}}catch(e){o={error:e}}finally{try{y&&!y.done&&(c=p.return)&&c.call(p)}finally{if(o)throw o.error}}this.addEntities.apply(this,s([],a(f),!1))},t}(c.TextManager);t.Text=f},8442:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TextManager=void 0;var a=function(e){function t(t){return e.call(this,i({name:"font"},t))||this}return o(t,e),t}(r(1241).EntityManager);t.TextManager=a},1422:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;var r=function(){function e(e,t,r,n,o,i){this.name=e,this.src=t,this.width=r,this.height=n,this.columns=o,this.rows=i}return e.prototype.resolveTextureCoordinates=function(e,t,r,n,o){var i=(t+e[0])*(n/this.columns)-(n-1)/this.columns*t,a=1-((r+e[1])*(o/this.rows)-(o-1)/this.rows*r),s=(i*this.width+.5-1)/this.width;s<0&&(s=(i*this.width+.5)/this.width);var u=(a*this.height+.5-1)/this.height;return u<0&&(u=(a*this.height+.5)/this.height),Float32Array.from([s,u])},e}();t.TextureAtlas=r},2038:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0;var i=r(6994),a=r(983),s=r(9468),u=r(604),c=r(2182),l=r(4240),f=r(166),d=function(e){function t(t,r,n){return e.call(this,{tag:"panel",components:[new i.Transform(t,r),new u.Shader(f.PROGRAM_BASIC),new s.Model(l.SQUARE),new a.FlatColor(n)]})||this}return o(t,e),t}(c.Entity);t.Panel=d},2280:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;var i=r(7523),a=r(2038),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.addPanel=function(e,t,r){this.addEntity(new a.Panel(e,t,r))},t}(i.UIManager);t.UI=s},7523:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.UIManager=void 0;var a=function(e){function t(t){return e.call(this,i({name:"ui"},t))||this}return o(t,e),t}(r(1241).EntityManager);t.UIManager=a},7057:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;var i=r(4499),a=r(2189),s=function(e){function t(t){var r=e.call(this,t)||this;r.cameras=new Map;var n=new i.Camera({name:"default",offset:t.camera.offset,projection:t.camera.projection});return r.addCamera(n),r.activeCamera=n,r}return o(t,e),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this.config.dimensions},enumerable:!1,configurable:!0}),t.prototype.addCamera=function(e){this.cameras.set(e.name,e)},t.prototype.getCamera=function(e){var t=this.cameras.get(e);if(!t)throw new a.AuraError({class:"World",method:"getCamera",message:"Failed to retrieve 2D Camera with name ".concat(e)});return t},t}(r(4842).WorldManager);t.World=s},4842:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.WorldManager=void 0;var a=r(2189),s=function(e){function t(t){return e.call(this,i({name:"world"},t))||this}return o(t,e),t.prototype.removeCamera=function(e){this.cameras.delete(e)},t.prototype.switchToCamera=function(e){var t=this.cameras.get(e);if(!t)throw new a.AuraError({class:"World",method:"switchToCamera",message:"Failed to switch to Camera with name ".concat(e)});this.activeCamera=t},t}(r(1241).EntityManager);t.WorldManager=s},196:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Health=void 0;var i=function(e){function t(t){var r=e.call(this,"Health")||this;return r.health=t,r}return o(t,e),t}(r(9323).Component);t.Health=i},4622:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;var i=r(9323),a=function(e){function t(t,r){return e.call(this,{tag:"enemy",components:[new i.Transform(t,new i.Vec2(30,30),0,r),new i.Model(i.Geometries.SQUARE),new i.Shader(i.ShaderPrograms.BASIC),new i.FlatColor(i.Color.red()),new i.BoxCollider]})||this}return o(t,e),t}(i.Entity);t.Enemy=a},668:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Food=void 0;var i=r(9323),a=function(e){function t(t){return e.call(this,{tag:"food",components:[new i.Transform(t,new i.Vec2(25,25),0,new i.Vec2),new i.Model(i.Geometries.CIRCLE),new i.Shader(i.ShaderPrograms.BASIC),new i.FlatColor(i.Color.yellow()),new i.BoxCollider]})||this}return o(t,e),t.prototype.onCollisionStart=function(e,t){"player"===t.tag&&e.world.removeEntity(this)},t}(i.Entity);t.Food=a},9101:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var i=r(9323),a=r(196),s=function(e){function t(){return e.call(this,{tag:"player",components:[new i.Transform(new i.Vec2(0,0),new i.Vec2(35,35),0,new i.Vec2(650,0)),new i.Model(i.Geometries.SQUARE),new i.Shader(i.ShaderPrograms.BASIC),new i.FlatColor(i.Color.green()),new i.BoxCollider,new a.Health(10)]})||this}return o(t,e),t.prototype.onCollisionStart=function(e,t){"enemy"===t.tag?this.getComponent("Health").health-=1:"food"===t.tag&&e.setData("points",e.getData("points")+1)},t}(i.Entity);t.Player=s},9798:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEAD_STATE=void 0;var n=r(9323);t.DEAD_STATE=new n.State({name:"dead",init:function(e){e.text.addString("You Died!",new n.Vec2(-200,100),new n.Vec2(50,50),n.Color.white()),e.text.addString("Points: ".concat(e.getData("points")),new n.Vec2(-200,0),new n.Vec2(50,50),n.Color.white()),e.text.addString("Enter to play again!",new n.Vec2(-460,-100),new n.Vec2(50,50),n.Color.white())},end:function(e){e.text.clearEntities()},tick:function(e){e.input.isKeyDown(n.Keys.ENTER)&&e.switchToState("main")}})},2019:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAIN_STATE=void 0;var n=r(9323),o=r(9101),i=r(2412),a=r(1122);t.MAIN_STATE=new n.State({name:"main",init:function(e){e.setData("points",0),e.addSystems(a.WrapSystem,i.ProgressionSystem,n.Physics,n.Collision),e.world.addEntity(new o.Player)},end:function(e){e.removeSystems("Wrap","Progression","Physics","Collision"),e.text.clearEntities(),e.world.clearEntities()},tick:function(e){e.text.clearEntities();var t=e.getData("points");e.text.addString("Points: ".concat(t),new n.Vec2(-e.world.dimensions.x/2+25,e.world.dimensions.y/2-25),new n.Vec2(30,30),n.Color.white());var r=e.world.filterEntitiesByTag("player")[0];if(r){var o=r.getComponent("Health").health,i="Health: ".concat(o);e.text.addString(i,new n.Vec2(e.world.dimensions.x/2-25*i.length-50,e.world.dimensions.y/2-25),new n.Vec2(30,30),n.Color.white());var a=r.getComponent("Transform");e.input.isKeyDown(n.Keys.A)?(a.velocity.setX(-650),a.velocity.setY(0)):e.input.isKeyDown(n.Keys.D)?(a.velocity.setX(650),a.velocity.setY(0)):e.input.isKeyDown(n.Keys.W)?(a.velocity.setX(0),a.velocity.setY(650)):e.input.isKeyDown(n.Keys.S)&&(a.velocity.setX(0),a.velocity.setY(-650))}}})},2131:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MENU_STATE=void 0;var n=r(9323);t.MENU_STATE=new n.State({name:"menu",init:function(e){e.text.addString("Press Enter!",new n.Vec2(-260,0),new n.Vec2(50,50),n.Color.white())},end:function(e){e.text.clearEntities()},tick:function(e){e.input.isKeyDown(n.Keys.ENTER)&&e.switchToState("main")}})},2412:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressionSystem=void 0;var i=r(9323),a=r(4622),s=r(668),u=function(e){function t(){var t=e.call(this,"Progression")||this;return t.enemyAdded=!1,t}return o(t,e),t.prototype.tick=function(e){var t=e.world.filterEntitiesByTag("player")[0];if(t&&t.getComponent("Health").health<=0&&e.switchToState("dead"),e.world.filterEntitiesByTag("food").length||e.world.addEntity(new s.Food(new i.Vec2(i.Random.between(-e.world.dimensions.x/2,e.world.dimensions.x/2),i.Random.between(-e.world.dimensions.y/2,e.world.dimensions.y/2)))),e.getData("points")%5==0){if(!this.enemyAdded){var r=Math.random();e.world.addEntity(new a.Enemy(new i.Vec2(i.Random.between(-e.world.dimensions.x,e.world.dimensions.x),i.Random.between(-e.world.dimensions.y,e.world.dimensions.y)),new i.Vec2(r<.5?500*i.Random.between(-1,1):0,r>.5?500*i.Random.between(-1,1):0))),this.enemyAdded=!0}}else this.enemyAdded=!1},t}(i.System);t.ProgressionSystem=u},1122:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WrapSystem=void 0;var i=r(9323),a=function(e){function t(){return e.call(this,"Wrap")||this}return o(t,e),t.prototype.tick=function(e){for(var t=0,r=e.world.filterEntitiesByTags("player","enemy");t<r.length;t++){var n=r[t].getComponent("Transform"),o=this.left(n),a=this.right(n),s=this.bottom(n),u=this.top(n);o>=e.world.dimensions.x/2?n.translate(new i.Vec2(-e.world.dimensions.x-n.scale.x,0)):a<=-e.world.dimensions.x/2&&n.translate(new i.Vec2(e.world.dimensions.x+n.scale.x,0)),s>=e.world.dimensions.y/2?n.translate(new i.Vec2(0,-e.world.dimensions.y-n.scale.y)):u<=-e.world.dimensions.y/2&&n.translate(new i.Vec2(0,e.world.dimensions.y+n.scale.y))}},t.prototype.left=function(e){return e.position.x-e.scale.x/2},t.prototype.right=function(e){return e.position.x+e.scale.x/2},t.prototype.bottom=function(e){return e.position.y-e.scale.y/2},t.prototype.top=function(e){return e.position.y+e.scale.y/2},t}(i.System);t.WrapSystem=a}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return o[e].call(r.exports,r,r.exports,a),r.exports}e=a(9323),t=a(9798),r=a(2019),n=a(2131),new e.Game({canvasDimensions:new e.Vec2(1024,768),states:[n.MENU_STATE,r.MAIN_STATE,t.DEAD_STATE]}).start(n.MENU_STATE.name)})();